# üöÄ –ë–´–°–¢–†–ê–Ø –°–ü–†–ê–í–ö–ê

## ‚ö° –û–°–ù–û–í–ù–´–ï –ö–û–ú–ê–ù–î–´

### –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏:
```powershell
python train_model.py
```

### –î–µ—Ç–µ–∫—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π:
```powershell
# –í–µ–±-–∫–∞–º–µ—Ä–∞
python detect_violations.py --source 0

# –í–∏–¥–µ–æ—Ñ–∞–π–ª
python detect_violations.py --source video.mp4

# IP-–∫–∞–º–µ—Ä–∞
python detect_violations.py --source rtsp://ip:port/stream
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –ª–∏—Ü:
```powershell
python face_database.py
```

### –ê–Ω–∞–ª–∏–∑ –æ—Ç—á–µ—Ç–æ–≤:
```powershell
# –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ä–∞–∑—É
python report_utils.py output/report_XXX.json --all

# –û—Ç–¥–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
python report_utils.py output/report_XXX.json --excel
python report_utils.py output/report_XXX.json --charts
python report_utils.py output/report_XXX.json --summary
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ GPU:
```powershell
python check_gpu.py
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GPU:
```powershell
nvidia-smi -l 1
```

---

## üìÅ –§–ê–ô–õ–´ –ü–†–û–ï–ö–¢–ê

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `train_model.py` | –û–±—É—á–µ–Ω–∏–µ YOLO11 –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ |
| `detect_violations.py` | –î–µ—Ç–µ–∫—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π |
| `face_database.py` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –ª–∏—Ü |
| `report_utils.py` | –ê–Ω–∞–ª–∏–∑ –æ—Ç—á–µ—Ç–æ–≤ |
| `check_gpu.py` | –ü—Ä–æ–≤–µ—Ä–∫–∞ GPU |
| `config.py` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã |
| `.env` | API –∫–ª—é—á–∏ (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!) |
| `main.ipynb` | Jupyter notebook |

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò –í config.py

### –û–±—É—á–µ–Ω–∏–µ:
```python
TRAIN_EPOCHS = 100      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö
TRAIN_BATCH = 32        # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–¥–ª—è RTX 5070)
TRAIN_IMG_SIZE = 640    # –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
TRAIN_PATIENCE = 20     # Early stopping
```

### –î–µ—Ç–µ–∫—Ü–∏—è:
```python
YOLO_CONFIDENCE = 0.5   # –ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (0-1)
YOLO_IOU = 0.45         # IoU –¥–ª—è NMS
YOLO_IMG_SIZE = 640     # –†–∞–∑–º–µ—Ä –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
```

### –ù–∞—Ä—É—à–µ–Ω–∏—è:
```python
VIOLATION_DURATION_THRESHOLD = 3  # –°–µ–∫—É–Ω–¥—ã –¥–ª—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
BUFFER_AFTER_VIOLATION = 5        # –ë—É—Ñ–µ—Ä –ø–æ—Å–ª–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
```

### –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü:
```python
FACE_RECOGNITION_TOLERANCE = 0.6  # –ü–æ—Ä–æ–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
FACE_DETECTION_MODEL = "hog"      # "hog" –∏–ª–∏ "cnn"
```

---

## üéØ –ö–õ–ê–°–°–´ –ù–ê–†–£–®–ï–ù–ò–ô

| ID | –ö–ª–∞—Å—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|-------|----------|
| 0 | `food_and_water` | –ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏ |
| 1 | `sleep_and_phone` | –°–æ–Ω –∏ —Ç–µ–ª–µ—Ñ–æ–Ω |
| 2 | `something` | –î—Ä—É–≥–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è |

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

```
output/
‚îú‚îÄ‚îÄ videos/                    # –í–∏–¥–µ–æ –Ω–∞—Ä—É—à–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ food_and_water_1_20251223_120000.mp4
‚îÇ   ‚îî‚îÄ‚îÄ sleep_and_phone_2_20251223_120530.mp4
‚îú‚îÄ‚îÄ faces/                     # –õ–∏—Ü–∞ –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ 1_20251223_120000_face.jpg
‚îÇ   ‚îî‚îÄ‚îÄ 2_20251223_120530_face.jpg
‚îú‚îÄ‚îÄ charts/                    # –ì—Ä–∞—Ñ–∏–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ violations_by_type.png
‚îÇ   ‚îú‚îÄ‚îÄ top_violators.png
‚îÇ   ‚îî‚îÄ‚îÄ heatmap.png
‚îî‚îÄ‚îÄ report_20251223_123000.json  # –û—Ç—á–µ—Ç
```

---

## üêõ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### GPU –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```powershell
python check_gpu.py
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: CUDA –¥–æ—Å—Ç—É–ø–Ω–∞: True
```

### Out of Memory:
```python
# –í config.py
TRAIN_BATCH = 16  # –∏–ª–∏ 8
```

### –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü–∏–∏:
```python
# –í config.py
YOLO_IMG_SIZE = 512
YOLO_MODEL = "yolo11n.pt"  # Nano –º–æ–¥–µ–ª—å
```

### –ú–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π:
```python
# –í config.py
YOLO_CONFIDENCE = 0.7  # –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥
VIOLATION_DURATION_THRESHOLD = 5  # –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏
```

### –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è:
```python
# –í config.py
YOLO_CONFIDENCE = 0.3  # –£–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ä–æ–≥
```

---

## üìû –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `TODO.md` | –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å |
| `START_HERE.md` | –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å |
| `SETUP_COMPLETE.md` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ |
| `README_YOLO.md` | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| `QUICKSTART.md` | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |
| `CHEATSHEET.md` | –≠—Ç–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞ |

---

## üíæ GIT –ö–û–ú–ê–ù–î–´

### –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```powershell
git add .
git commit -m "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫"
git push
```

### –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã (.gitignore):
```
.env
data/
models/
output/
logs/
*.pt
*.pth
```

---

## üéÆ GPU –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ GPU:
```powershell
nvidia-smi
```

### –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```powershell
nvidia-smi -l 1  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
```

### –¢–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:
```powershell
nvidia-smi --query-gpu=memory.used,memory.total --format=csv
```

---

## üî• –ì–û–†–Ø–ß–ò–ï –ö–õ–ê–í–ò–®–ò

### –í detect_violations.py:
- **Q** - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç
- **Ctrl+C** - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í face_database.py:
- **add** - –î–æ–±–∞–≤–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ (–æ–¥–Ω–æ —Ñ–æ—Ç–æ)
- **add_folder** - –î–æ–±–∞–≤–∏—Ç—å –ø–∞–ø–∫—É —Å —Ñ–æ—Ç–æ
- **list** - –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –≤ –±–∞–∑–µ
- **remove** - –£–¥–∞–ª–∏—Ç—å —á–µ–ª–æ–≤–µ–∫–∞
- **exit** - –í—ã—Ö–æ–¥

---

## üìà –ú–ï–¢–†–ò–ö–ò YOLO

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –¶–µ–ª–µ–≤–æ–µ |
|---------|----------|---------|
| **mAP@50** | Mean Average Precision –ø—Ä–∏ IoU=0.5 | >0.80 |
| **mAP@50-95** | mAP –ø—Ä–∏ IoU –æ—Ç 0.5 –¥–æ 0.95 | >0.60 |
| **Precision** | –¢–æ—á–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü–∏–π | >0.75 |
| **Recall** | –ü–æ–ª–Ω–æ—Ç–∞ –¥–µ—Ç–µ–∫—Ü–∏–π | >0.70 |
| **Loss** | –§—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å | <1.0 |

---

## üåê –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- **Ultralytics Docs**: https://docs.ultralytics.com/
- **Roboflow**: https://roboflow.com/
- **PyTorch**: https://pytorch.org/
- **face_recognition**: https://github.com/ageitgey/face_recognition

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (3 –ö–û–ú–ê–ù–î–´)

```powershell
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install face-recognition roboflow

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env (–æ—Ç–∫—Ä–æ–π—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ)

# 3. –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å
python train_model.py
```

---

–ì–æ—Ç–æ–≤–æ! üöÄ
